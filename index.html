<!DOCTYPE html>
<html>
<head>
<title>Baouss Pro League - FPL Dashboard V2</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background: linear-gradient(135deg, #0F172A 0%, #1A1F36 50%, #0F172A 100%);
  color: #F1F5F9;
  min-height: 100vh;
}
.container { max-width: 1600px; margin: 0 auto; padding: 20px; }
.header {
  background: linear-gradient(135deg, rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.9));
  border: 1px solid rgba(255, 255, 255, 0.1);
  padding: 40px;
  border-radius: 20px;
  margin-bottom: 30px;
  backdrop-filter: blur(20px);
  border-bottom: 2px solid #06B6D4;
}
.header h1 {
  font-size: 2.5rem;
  background: linear-gradient(135deg, #06B6D4, #3B82F6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 10px;
}
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 16px;
  margin: 20px 0;
}
.stat-card {
  background: linear-gradient(135deg, rgba(6, 182, 212, 0.05), rgba(59, 130, 246, 0.05));
  border: 1px solid rgba(255, 255, 255, 0.1);
  padding: 20px;
  border-radius: 12px;
  text-align: center;
}
.stat-value { font-size: 2rem; color: #06B6D4; font-weight: 700; }
table { width: 100%; border-collapse: collapse; margin-top: 15px; }
th { padding: 14px; text-align: left; font-weight: 700; color: #06B6D4; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
td { padding: 12px; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
.sync-btn {
  position: fixed;
  bottom: 30px;
  right: 30px;
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  padding: 15px 30px;
  border-radius: 50px;
  cursor: pointer;
  font-weight: 600;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
}
</style>
</head>
<body>
<div class="container">
<div class="header">
<h1>üèÜ BAOUSS PRO LEAGUE</h1>
<p>Fantasy Premier League | Season 2025-26</p>
</div>
<div class="stats-grid">
<div class="stat-card"><div>Current GW</div><div class="stat-value" id="currentGW">--</div></div>
<div class="stat-card"><div>Managers</div><div class="stat-value">60</div></div>
<div class="stat-card"><div>Prize Pool</div><div class="stat-value">‚Çπ1.2L+</div></div>
</div>
<div style="background: rgba(255,255,255,0.05); padding: 24px; border-radius: 16px; margin-top: 20px;">
<h2 style="color: #06B6D4; margin-bottom: 20px;">Classic League Standings</h2>
<table id="standings"><thead><tr><th>Rank</th><th>Manager</th><th>Team</th><th>GW Points</th><th>Total</th></tr></thead><tbody id="standingsBody"><tr><td colspan="5" style="text-align:center;">Click Sync to load data...</td></tr></tbody></table>
</div>
</div>
<button class="sync-btn" onclick="syncData()">üîÑ Sync Now</button>
<script>
async function syncData() {
  const btn = document.querySelector('.sync-btn');
  btn.textContent = '‚è≥ Syncing...';
  btn.disabled = true;
  try {
    const gw = await getCurrentGW();
    document.getElementById('currentGW').textContent = gw;
    const managers = await fetchAllManagers();
    renderTable(managers);
    btn.textContent = '‚úÖ Synced!';
    btn.style.background = 'linear-gradient(135deg, #4facfe, #00f2fe)';
    setTimeout(() => {
      btn.textContent = 'üîÑ Sync Now';
      btn.style.background = 'linear-gradient(135deg, #667eea, #764ba2)';
      btn.disabled = false;
    }, 2000);
  } catch(e) {
    alert('Sync failed: ' + e.message);
    btn.textContent = 'üîÑ Sync Now';
    btn.disabled = false;
  }
}
async function getCurrentGW() {
  const res = await fetch('https://fantasy.premierleague.com/api/bootstrap-static/');
  const data = await res.json();
  return data.events.find(e => e.is_current)?.id || 10;
}
async function fetchAllManagers() {
  let all = [];
  for(let page = 1; page <= 2; page++) {
    const res = await fetch(`https://fantasy.premierleague.com/api/leagues-classic/1229613/standings/?page_standings=${page}`);
    const data = await res.json();
    if(data.standings?.results) all = all.concat(data.standings.results);
  }
  return all;
}
function renderTable(managers) {
  const html = managers.map((m,i) => `
    <tr>
      <td><strong>${i+1}</strong></td>
      <td>${m.player_name}</td>
      <td>${m.entry_name}</td>
      <td>${m.event_total || 0}</td>
      <td><strong>${m.total}</strong></td>
    </tr>
  `).join('');
  document.getElementById('standingsBody').innerHTML = html;
}
window.onload = () => syncData();
</script>
</body>
</html>
